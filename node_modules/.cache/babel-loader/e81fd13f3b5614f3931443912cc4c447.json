{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Kseniya/dev/mesto-react/mesto-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/Kseniya/dev/mesto-react/mesto-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/Kseniya/dev/mesto-react/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import api from\"../utils/Api\";import Card from\"./Card\";import\"../index.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Main(_ref){var onEditProfile=_ref.onEditProfile,onAddPlace=_ref.onAddPlace,onEditAvatar=_ref.onEditAvatar,onCardClick=_ref.onCardClick;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userAvatar=_useState2[0],setUserAvatar=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),userName=_useState4[0],setUserName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),userDescription=_useState6[0],setUserDescription=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),cards=_useState8[0],setCards=_useState8[1];var fetchCards=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.getInitialCards();case 3:res=_context.sent;setCards(res);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.warn(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchCards(){return _ref2.apply(this,arguments);};}();var fetchData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return api.getUserInfo();case 3:res=_context2.sent;setUserName(res.name);setUserDescription(res.description);setUserAvatar(res.avatar);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.warn(_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function fetchData(){return _ref3.apply(this,arguments);};}();useEffect(function(){fetchData();fetchCards();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{class:\"profile\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"profile__avatar\",src:userAvatar,alt:\"\\u0410\\u0432\\u0430\\u0442\\u0430\\u0440\",onClick:onEditAvatar}),/*#__PURE__*/_jsx(\"div\",{className:\"profile__avatar-edit\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile__info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile__wrap\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"profile__name\",children:[userName!==null&&userName!==void 0?userName:\"Chornaya Kseniya\",\" \"]}),/*#__PURE__*/_jsx(\"button\",{className:\"profile__edit-button\",type:\"button\",\"data-popup\":\"edit\",onClick:onEditProfile})]}),/*#__PURE__*/_jsx(\"p\",{className:\"profile__job\",children:userDescription!==null&&userDescription!==void 0?userDescription:\"Traveler\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"profile__add-button\",type:\"button\",\"data-popup\":\"add\",onClick:onAddPlace})]}),/*#__PURE__*/_jsx(\"section\",{className:\"cards\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"card\",children:cards.map(function(card){return/*#__PURE__*/_jsx(Card,{card:card,title:card.name,image:card.link,likesCount:card.likes.length,onCardClick:onCardClick},card._id);})})})]});}export default Main;","map":{"version":3,"names":["React","useEffect","useState","api","Card","Main","onEditProfile","onAddPlace","onEditAvatar","onCardClick","userAvatar","setUserAvatar","userName","setUserName","userDescription","setUserDescription","cards","setCards","fetchCards","getInitialCards","res","console","warn","fetchData","getUserInfo","name","description","avatar","map","card","link","likes","length","_id"],"sources":["/Users/Kseniya/dev/mesto-react/mesto-react/src/components/Main.jsx"],"sourcesContent":["import React,  {useEffect, useState} from \"react\";\nimport api from \"../utils/Api\";\nimport Card from \"./Card\";\nimport \"../index.css\";\n\nfunction Main({ onEditProfile, onAddPlace, onEditAvatar, onCardClick }) {\n  const [userAvatar, setUserAvatar] = useState(\"\");\n  const [userName, setUserName] = useState(\"\");\n  const [userDescription, setUserDescription] = useState(\"\");\n  const [cards, setCards] = useState([]);\n\n  const fetchCards = async () => {\n    try {\n        const res = await api.getInitialCards();\n        setCards(res);\n    } catch (e) {\n        console.warn(e)\n    }\n}\n\nconst fetchData = async () => {\n    try {\n        const res = await api.getUserInfo();\n        setUserName(res.name);\n        setUserDescription(res.description);\n        setUserAvatar(res.avatar);\n    } catch (e) {\n        console.warn(e)\n    }\n}\n\nuseEffect(() => {\n    fetchData();\n    fetchCards();\n}, [])\n\n\n  return (\n    <>\n      <section class=\"profile\">\n        <img\n          className=\"profile__avatar\"\n          src={userAvatar}\n          alt=\"Аватар\"\n          onClick={onEditAvatar}\n        />\n        <div className=\"profile__avatar-edit\"></div>\n        <div className=\"profile__info\">\n          <div className=\"profile__wrap\">\n            <h1 className=\"profile__name\">{userName ?? \"Chornaya Kseniya\"} </h1>\n            <button\n              className=\"profile__edit-button\"\n              type=\"button\"\n              data-popup=\"edit\"\n              onClick={onEditProfile}\n            ></button>\n          </div>\n          <p className=\"profile__job\">{userDescription ?? \"Traveler\"}</p>\n        </div>\n        <button\n          className=\"profile__add-button\"\n          type=\"button\"\n          data-popup=\"add\"\n          onClick={onAddPlace}\n        ></button>\n      </section>\n      <section className=\"cards\">\n        <ul className=\"card\">\n          {cards.map((card) => (\n            <Card\n              card={card}\n              key={card._id}\n              title={card.name}\n              image={card.link}\n              likesCount={card.likes.length}\n              onCardClick={onCardClick}\n            />\n          ))}\n        </ul>\n      </section>\n    </>\n  );\n}\n\nexport default Main;"],"mappings":"gZAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA0C,OAA1C,CACA,MAAOC,IAAP,KAAgB,cAAhB,CACA,MAAOC,KAAP,KAAiB,QAAjB,CACA,MAAO,cAAP,C,6IAEA,QAASC,KAAT,MAAwE,IAAxDC,cAAwD,MAAxDA,aAAwD,CAAzCC,UAAyC,MAAzCA,UAAyC,CAA7BC,YAA6B,MAA7BA,YAA6B,CAAfC,WAAe,MAAfA,WAAe,CACtE,cAAoCP,QAAQ,CAAC,EAAD,CAA5C,wCAAOQ,UAAP,eAAmBC,aAAnB,eACA,eAAgCT,QAAQ,CAAC,EAAD,CAAxC,yCAAOU,QAAP,eAAiBC,WAAjB,eACA,eAA8CX,QAAQ,CAAC,EAAD,CAAtD,yCAAOY,eAAP,eAAwBC,kBAAxB,eACA,eAA0Bb,QAAQ,CAAC,EAAD,CAAlC,yCAAOc,KAAP,eAAcC,QAAd,eAEA,GAAMC,WAAU,6FAAG,mLAEKf,IAAG,CAACgB,eAAJ,EAFL,QAEPC,GAFO,eAGbH,QAAQ,CAACG,GAAD,CAAR,CAHa,+EAKbC,OAAO,CAACC,IAAR,cALa,oEAAH,kBAAVJ,WAAU,2CAAhB,CASF,GAAMK,UAAS,6FAAG,0LAEQpB,IAAG,CAACqB,WAAJ,EAFR,QAEJJ,GAFI,gBAGVP,WAAW,CAACO,GAAG,CAACK,IAAL,CAAX,CACAV,kBAAkB,CAACK,GAAG,CAACM,WAAL,CAAlB,CACAf,aAAa,CAACS,GAAG,CAACO,MAAL,CAAb,CALU,mFAOVN,OAAO,CAACC,IAAR,eAPU,sEAAH,kBAATC,UAAS,2CAAf,CAWAtB,SAAS,CAAC,UAAM,CACZsB,SAAS,GACTL,UAAU,GACb,CAHQ,CAGN,EAHM,CAAT,CAME,mBACE,wCACE,iBAAS,KAAK,CAAC,SAAf,wBACE,YACE,SAAS,CAAC,iBADZ,CAEE,GAAG,CAAER,UAFP,CAGE,GAAG,CAAC,sCAHN,CAIE,OAAO,CAAEF,YAJX,EADF,cAOE,YAAK,SAAS,CAAC,sBAAf,EAPF,cAQE,aAAK,SAAS,CAAC,eAAf,wBACE,aAAK,SAAS,CAAC,eAAf,wBACE,YAAI,SAAS,CAAC,eAAd,WAA+BI,QAA/B,SAA+BA,QAA/B,UAA+BA,QAA/B,CAA2C,kBAA3C,OADF,cAEE,eACE,SAAS,CAAC,sBADZ,CAEE,IAAI,CAAC,QAFP,CAGE,aAAW,MAHb,CAIE,OAAO,CAAEN,aAJX,EAFF,GADF,cAUE,UAAG,SAAS,CAAC,cAAb,UAA6BQ,eAA7B,SAA6BA,eAA7B,UAA6BA,eAA7B,CAAgD,UAAhD,EAVF,GARF,cAoBE,eACE,SAAS,CAAC,qBADZ,CAEE,IAAI,CAAC,QAFP,CAGE,aAAW,KAHb,CAIE,OAAO,CAAEP,UAJX,EApBF,GADF,cA4BE,gBAAS,SAAS,CAAC,OAAnB,uBACE,WAAI,SAAS,CAAC,MAAd,UACGS,KAAK,CAACY,GAAN,CAAU,SAACC,IAAD,qBACT,KAAC,IAAD,EACE,IAAI,CAAEA,IADR,CAGE,KAAK,CAAEA,IAAI,CAACJ,IAHd,CAIE,KAAK,CAAEI,IAAI,CAACC,IAJd,CAKE,UAAU,CAAED,IAAI,CAACE,KAAL,CAAWC,MALzB,CAME,WAAW,CAAEvB,WANf,EAEOoB,IAAI,CAACI,GAFZ,CADS,EAAV,CADH,EADF,EA5BF,GADF,CA6CD,CAED,cAAe5B,KAAf"},"metadata":{},"sourceType":"module"}